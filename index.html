<script language="JavaScript">
// Create the XHR object.
function createCORSRequest(method, url) {
  var xhr = new XMLHttpRequest();
  xhr.withCredentials = true;

  if ("withCredentials" in xhr) {
    // XHR for Chrome/Firefox/Opera/Safari.
    xhr.open(method, url, true);
    xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
    xhr.setRequestHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept')
    xhr.setRequestHeader('Access-Control-Allow-Methods', 'Origin, Content-Type, X-Auth-Token')
  } else if (typeof XDomainRequest != "undefined") {
    // XDomainRequest for IE.
    xhr = new XDomainRequest();
    xhr.open(method, url);
    xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
    xhr.setRequestHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept')
    xhr.setRequestHeader('Access-Control-Allow-Methods', 'Origin, Content-Type, X-Auth-Token')
  } else {
    // CORS not supported.
    xhr = null;
  }
  return xhr;
}

// Make the actual CORS request.
function makeCorsRequest() {
  // This is a sample server that supports CORS.
  var url = 'https://www.pornhub.com/webmasters/video_by_id?id=44bc40f3bc04f65b7a35&thumbsize=medium';
/*
  var xhr = createCORSRequest('GET', url);
  if (!xhr) {
    alert('CORS not supported');
    return;
  }

  // Response handlers.
  xhr.onload = function() {
    var text = xhr.responseText;
    console.log(text)
  };

  xhr.onerror = function() {
    console.log('Woops, there was an error making the request.');
  };
  xhr.send();
  */
  var http_request;
  http_request = new XMLHttpRequest();
  //http_request.onreadystatechange = function (data) { console.log(data) };
  http_request.open("GET", url);
  http_request.withCredentials = true;
  http_request.setRequestHeader('Access-Control-Allow-Origin', '*');
  http_request.setRequestHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization')
  http_request.setRequestHeader('Access-Control-Allow-Credentials', 'true')
  http_request.setRequestHeader('Access-Control-Allow-Methods', 'GET')
  http_request.setRequestHeader("Content-Type", "application/json");
  http_request.send();
  // Response handlers.
  http_request.onload = function() {
    var text = http_request.responseText;
    console.log(text)
  };

  http_request.onerror = function() {
    console.log('Woops, there was an error making the request.');
  };
}
makeCorsRequest()
</script>
<h1>TEST</h1>
